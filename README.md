# GameScrcpy

**[English](README_EN.md)** | ä¸­æ–‡

<h3 align="center">ğŸ® åŠŸèƒ½å¼ºå¤§çš„ Android è®¾å¤‡æŠ•å±æ§åˆ¶å·¥å…·</h3>

<p align="center">
  <a href="../../releases"><img src="https://img.shields.io/github/v/release/nicenick14/GameScrcpy?style=flat-square&color=blue" alt="Release"></a>
  <img src="https://img.shields.io/badge/Version-1.2.0-blue?style=flat-square" alt="Version">
  <img src="https://img.shields.io/badge/Platform-Windows%2010%2F11-blue?style=flat-square" alt="Platform">
  <img src="https://img.shields.io/badge/Qt-6.x-41CD52?style=flat-square&logo=qt" alt="Qt Version">
  <a href="LICENSE"><img src="https://img.shields.io/badge/License-Apache%202.0-orange?style=flat-square" alt="License"></a>
  <img src="https://img.shields.io/badge/Android-5.0%2B-3DDC84?style=flat-square&logo=android" alt="Android">
</p>

<p align="center">
  <a href="#-æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</a> â€¢
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#ï¸-é”®ä½æ˜ å°„">é”®ä½æ˜ å°„</a> â€¢
  <a href="#-è„šæœ¬ç³»ç»Ÿ">è„šæœ¬ç³»ç»Ÿ</a> â€¢
  <a href="#-ä»æºç æ„å»º">æ„å»º</a>
</p>

---
  äº¤æµç¾¤ï¼š762961615

---

## â­ æ ¸å¿ƒç‰¹æ€§

### ğŸ–¥ï¸ é«˜æ¸…æŠ•å±

- **é«˜æ¸…ä½å»¶è¿Ÿ** â€” H.264 ç¡¬ä»¶è§£ç ï¼Œå»¶è¿Ÿ < 50ms
- **USB / WiFi** â€” æ”¯æŒæœ‰çº¿å’Œæ— çº¿ä¸¤ç§è¿æ¥æ–¹å¼
- **åŒä¼ è¾“æ¨¡å¼** â€” KCP å¯é ä¼ è¾“ + è£¸ UDP æä½å»¶è¿Ÿä¼ è¾“ï¼ŒWiFi åœºæ™¯è‡ªåŠ¨é€‰æ‹©
- **FEC å‰å‘çº é”™** â€” XOR 10:1 å†—ä½™ç¼–ç ï¼Œç»„å†…ä¸¢ 1 åŒ…å¯æ¢å¤ï¼Œå¼±ç½‘ç¯å¢ƒæ›´ç¨³å®š
- **è‡ªé€‚åº”ç ç‡** â€” ç¼–ç å™¨çº§ ABR + ç½‘ç»œå±‚åé¦ˆåŒå±‚æ§åˆ¶ï¼Œè‡ªåŠ¨è°ƒæ•´è§†é¢‘ç ç‡
- **æœåŠ¡ç«¯ GPU æ»¤é•œ** â€” OpenGL ä»¿å°„å˜æ¢ï¼ˆæ—‹è½¬/è£å‰ª/ç¼©æ”¾ï¼‰ï¼ŒæœåŠ¡ç«¯å®Œæˆç”»é¢å˜æ¢
- **å¸§ç‡å¯è°ƒ** â€” 0-999 FPS è‡ªç”±è®¾ç½®ï¼Œ0 = ä¸é™åˆ¶
- **æ€§èƒ½ç›‘æ§** â€” å®æ—¶ FPSã€è§£ç å»¶è¿Ÿã€ç½‘ç»œå»¶è¿Ÿã€CPU/å†…å­˜æŒ‡æ ‡
---

### ğŸ® æ¸¸æˆé”®ä½æ˜ å°„

- **å¯è§†åŒ–ç¼–è¾‘** â€” æ‹–æ‹½å¼é”®ä½æ˜ å°„ç¼–è¾‘å™¨ï¼Œæ‰€è§å³æ‰€å¾—
- **å¤šç§æ˜ å°„ç±»å‹** â€” ç‚¹å‡»ã€æ–¹å‘è½®ç›˜ã€è§†è§’æ§åˆ¶ã€è‡ªç”±è§†è§’
- **é”®ä½è¦†ç›–å±‚** â€” å®æ—¶åŠé€æ˜æ˜¾ç¤ºå½“å‰é”®ä½æ˜ å°„çŠ¶æ€ï¼Œæ”¯æŒè„šæœ¬åŠ¨æ€ç§»åŠ¨/éšè—
- **ç»„åˆé”®æ”¯æŒ** â€” `Shift+G`ã€`Ctrl+A`ã€`Alt+Tab` ç­‰
- **é…ç½®çƒ­åŠ è½½** â€” ä¿®æ”¹ JSON é…ç½®åæ— éœ€é‡å¯

| æ˜ å°„ç±»å‹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|:---------|:-----|:---------|
| `click` | å•å‡» | æŠ€èƒ½ã€èœå• |
| `steerWheel` | æ–¹å‘è½®ç›˜ | WASD ç§»åŠ¨ |
| `drag` | æ‹–æ‹½ | æŠ€èƒ½æ–¹å‘ |
| `freeLook` | è‡ªç”±è§†è§’ | FPS å°çœ¼ç› |
| `script` | è„šæœ¬ | è‡ªå®šä¹‰é€»è¾‘ |

---

### ğŸ¤– è„šæœ¬ç³»ç»Ÿ

- **JavaScript å¼•æ“** â€” åŸºäº QJSEngine çš„æ²™ç®±åŒ–è„šæœ¬ç³»ç»Ÿ
- **28 ä¸ª API** â€” è§¦æ‘¸ã€æŒ‰é”®ã€æ»‘åŠ¨ã€ç¼©æ”¾ã€å»¶æ—¶ã€å›¾åƒè¯†åˆ«ã€è™šæ‹ŸæŒ‰é’®ã€é¢„å®šä¹‰æ»‘åŠ¨ã€å…¨å±€çŠ¶æ€ç­‰
- **è„šæœ¬ç¼–è¾‘å™¨** â€” å†…ç½®ç¼–è¾‘å™¨ + å¿«æ·æŒ‡ä»¤é¢æ¿ + ä»£ç ç‰‡æ®µæ’å…¥ + è‡ªåŠ¨è¡¥å…¨
- **è·å–å·¥å…·** â€” é€‰åŒºç¼–è¾‘å™¨æ”¯æŒè·å–ä½ç½®ã€æ–°å»ºæŒ‰é’®ã€æ–°å»ºæ»‘åŠ¨ã€æˆªå–å›¾ç‰‡ã€åˆ›å»ºé€‰åŒºï¼Œå³é”®ç”Ÿæˆä»£ç 
- **å¤šè„šæœ¬å¹¶è¡Œ** â€” ç‹¬ç«‹æ²™ç®±ã€ç‹¬ç«‹çº¿ç¨‹ã€äº’ä¸å¹²æ‰°
- **è‡ªåŠ¨å¯åŠ¨** â€” è„šæœ¬å¯åœ¨æŠ•å±å¼€å§‹æ—¶è‡ªåŠ¨è¿è¡Œï¼ˆ`// @autoStart`ï¼‰
- **æ‚¬æµ®æç¤º** â€” `toast()` åœ¨ç”»é¢ä¸Šæ˜¾ç¤ºå®æ—¶çŠ¶æ€ï¼Œæ”¯æŒæ‹–æ‹½ç§»åŠ¨

```javascript
// ç¤ºä¾‹ï¼šè‡ªåŠ¨è¿ç‚¹
while (!mapi.isInterrupted()) {
    mapi.click(0.5, 0.5);
    mapi.sleep(100);
}
```

---

### ğŸ“· å›¾åƒè¯†åˆ«

- **OpenCV æ¨¡æ¿åŒ¹é…** â€” ç²¾å‡†æ‰¾å›¾å®šä½
- **åŒºåŸŸé™å®š** â€” åæ ‡åŒºåŸŸæˆ–è‡ªå®šä¹‰é€‰åŒºç¼–å·ï¼Œæé«˜æ•ˆç‡
- **é€‰åŒºç¼–è¾‘å™¨** â€” å¯è§†åŒ–åˆ›å»º/ç¼–è¾‘æœç´¢åŒºåŸŸï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç 
- **æ¨¡æ¿æˆªå–** â€” ç›´æ¥åœ¨é¢„è§ˆç”»é¢ä¸Šæˆªå–ä¿å­˜æ¨¡æ¿å›¾ç‰‡
- **ç½®ä¿¡åº¦æ§åˆ¶** â€” è‡ªå®šä¹‰åŒ¹é…ç²¾åº¦é˜ˆå€¼

```javascript
// æŒ‰åæ ‡åŒºåŸŸæ‰¾å›¾
var result = mapi.findImage("button", 0.7, 0.5, 1.0, 1.0, 0.8);
if (result.found) {
    mapi.click(result.x, result.y);
}

// æŒ‰é€‰åŒºç¼–å·æ‰¾å›¾ï¼ˆé€‰åŒºåœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»ºï¼‰
var result = mapi.findImageByRegion("button", 3, 0.8);
```

---

### ğŸ® è™šæ‹ŸæŒ‰é’®ä¸æ»‘åŠ¨è·¯å¾„

- **è™šæ‹ŸæŒ‰é’®** â€” åœ¨é€‰åŒºç¼–è¾‘å™¨ä¸­å¯è§†åŒ–åˆ›å»ºå±å¹•ä½ç½®æ ‡è®°ï¼Œä¿å­˜åˆ° `buttons.json`
- **æ»‘åŠ¨è·¯å¾„** â€” ä¸¤æ¬¡ç‚¹å‡»è®¾ç½®èµ·ç‚¹â†’ç»ˆç‚¹ï¼Œä¿å­˜åˆ° `swipes.json`
- **è„šæœ¬é›†æˆ** â€” `mapi.getbuttonpos(id)` è·å–ä½ç½®ï¼Œ`mapi.swipeById(id)` æ‰§è¡Œæ»‘åŠ¨
- **å³é”®ç”Ÿæˆä»£ç ** â€” ç›´æ¥æ’å…¥ `mapi.click()`/`mapi.slide()` ç­‰ä»£ç åˆ°è„šæœ¬ç¼–è¾‘å™¨

```javascript
// è·å–è™šæ‹ŸæŒ‰é’®ä½ç½®å¹¶ç‚¹å‡»
var btn = mapi.getbuttonpos(1);
if (btn.valid) mapi.click(btn.x, btn.y);

// æ‰§è¡Œé¢„å®šä¹‰æ»‘åŠ¨
mapi.swipeById(1, 200, 10);
```

---

### ğŸ›¡ï¸ æ‹ŸäººåŒ–æ“ä½œ

- **è§¦æ‘¸éšæœºåç§»** â€” æ¯æ¬¡ç‚¹å‡»/æ»‘åŠ¨è‡ªåŠ¨æ·»åŠ éšæœºåç§»ï¼Œé¿å…åæ ‡å®Œå…¨ä¸€è‡´
- **æ»‘åŠ¨è½¨è¿¹æ›²çº¿** â€” ä¸‰å±‚æ­£å¼¦å åŠ æ¨¡æ‹ŸçœŸäººæ»‘åŠ¨è½¨è¿¹ï¼ˆä¸»æ›²çº¿ + æ¬¡æ›²çº¿ + å¾®æŒ¯åŠ¨ï¼‰
- **æ–¹å‘è½®ç›˜å¹³æ»‘** â€” ç§»åŠ¨è¾“å…¥è‡ªç„¶è¿‡æ¸¡
- **å¯è°ƒå¼ºåº¦** â€” UI æ»‘å—å®æ—¶è°ƒèŠ‚åç§»é‡å’Œæ›²çº¿å¹…åº¦ (0~100)

---

## ğŸ“¥ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|:-----|:-----|
| **æ“ä½œç³»ç»Ÿ** | Windows 10 / 11 (64ä½) |
| **Android è®¾å¤‡** | Android 5.0+ (API 21+) |
| **è¿æ¥æ–¹å¼** | USB æ•°æ®çº¿ æˆ– WiFi åŒä¸€å±€åŸŸç½‘ |

### ä¸‹è½½å®‰è£…

ä» [Releases](../../releases) é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œè§£å‹åç›´æ¥è¿è¡Œ `GameScrcpy.exe`ã€‚

### ä½¿ç”¨æ­¥éª¤

1. **å¯ç”¨ USB è°ƒè¯•**
   ```
   è®¾ç½® â†’ å…³äºæ‰‹æœº â†’ è¿ç»­ç‚¹å‡»"ç‰ˆæœ¬å·" 7 æ¬¡
   è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹ â†’ å¯ç”¨ USB è°ƒè¯•
   ```

2. **è¿æ¥è®¾å¤‡** â€” USB æ•°æ®çº¿è¿æ¥ï¼Œæˆ–è¾“å…¥è®¾å¤‡ IP è¿›è¡Œ WiFi è¿æ¥

3. **å¼€å§‹æŠ•å±** â€” ç‚¹å‡»ã€Œåˆ·æ–°è®¾å¤‡ã€â†’ é€‰æ‹©è®¾å¤‡ â†’ ç‚¹å‡»ã€Œå¼€å§‹æŠ•å±ã€



---

## ğŸ¤– è„šæœ¬ API

é€šè¿‡ `mapi` å¯¹è±¡è°ƒç”¨ï¼Œå®Œæ•´æ–‡æ¡£è§ **[è„šæœ¬ API æ–‡æ¡£](docs/SCRIPT_API.md)**ã€‚

### å¸¸ç”¨ API é€Ÿè§ˆ

```javascript
// è§¦æ‘¸æ“ä½œ
mapi.click(x, y)              // ç‚¹å‡»
mapi.holdpress(x, y)          // æŒ‰ä½ï¼ˆæ¾å¼€å®é”®è‡ªåŠ¨é‡Šæ”¾ï¼‰
mapi.releaseAll()              // é‡Šæ”¾æ‰€æœ‰è§¦æ‘¸ç‚¹
mapi.slide(x1, y1, x2, y2, duration, steps)  // æ»‘åŠ¨
mapi.pinch(cx, cy, scale, duration, steps)    // åŒæŒ‡ç¼©æ”¾

// æ§åˆ¶æµ
mapi.sleep(ms)                // å»¶æ—¶
mapi.isInterrupted()          // æ£€æŸ¥æ˜¯å¦ä¸­æ–­
mapi.isPress()                // å½“å‰å®é”®æ˜¯å¦æŒ‰ä¸‹

// æŒ‰é”®ä¸å·¥å…·
mapi.key("T", 50)             // æ¨¡æ‹Ÿé”®ä½æŒ‰é”®
mapi.toast("æ¶ˆæ¯", 3000)      // æ‚¬æµ®æç¤º
mapi.getKeyState("W")         // è·å–æŒ‰é”®çŠ¶æ€ (1/0)
mapi.setKeyUIPos("J", x, y)   // åŠ¨æ€è®¾ç½®æŒ‰é”® UI ä½ç½®

// å…¨å±€çŠ¶æ€ï¼ˆè·¨è„šæœ¬å…±äº«ï¼‰
mapi.setGlobal("key", value)
mapi.getGlobal("key")

// æ¸¸æˆæ§åˆ¶
mapi.shotmode(true)           // åˆ‡æ¢å°„å‡»/å…‰æ ‡æ¨¡å¼
mapi.resetview()              // é‡ç½®è§†è§’
mapi.resetwheel()             // é‡ç½®æ–¹å‘è½®ç›˜
mapi.setRadialParam(up, down, left, right)  // è®¾ç½®ç§»åŠ¨é€Ÿåº¦

// å›¾åƒè¯†åˆ«
mapi.findImage("name", x1, y1, x2, y2, threshold)
mapi.findImageByRegion("name", regionId, threshold)

// è™šæ‹ŸæŒ‰é’®ä¸æ»‘åŠ¨
mapi.getbuttonpos(buttonId)        // è·å–è™šæ‹ŸæŒ‰é’®ä½ç½®
mapi.swipeById(swipeId, ms, steps) // æŒ‰ç¼–å·æ‰§è¡Œæ»‘åŠ¨

// æ¨¡å—
mapi.loadModule("utils.js")   // åŠ è½½ ES6 æ¨¡å—
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
GameScrcpy/
â”œâ”€â”€ client/                 # å®¢æˆ·ç«¯ (Qt/C++)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/           # åº”ç”¨å…¥å£ã€é…ç½®ã€é¦–æ¬¡è¿è¡Œåè®®
â”‚   â”‚   â”œâ”€â”€ ui/            # ç”¨æˆ·ç•Œé¢ã€é”®ä½è¦†ç›–å±‚ã€è„šæœ¬ç¼–è¾‘å™¨ã€é€‰åŒºç¼–è¾‘å™¨ã€æ€§èƒ½ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ control/       # æ§åˆ¶ã€é”®ä½æ˜ å°„ã€è„šæœ¬å¼•æ“ (æ²™ç®±åŒ–)ã€è´£ä»»é“¾è¾“å…¥å¤„ç†
â”‚   â”‚   â”œâ”€â”€ transport/     # ä¼ è¾“ (TCP / KCP / è£¸ UDP / ADB)ã€FEC å‰å‘çº é”™
â”‚   â”‚   â”œâ”€â”€ decoder/       # FFmpeg è§†é¢‘è§£ç  (é›¶æ‹·è´ SIMD + D3D11VA GPU ç›´é€š)
â”‚   â”‚   â”œâ”€â”€ render/        # OpenGL æ¸²æŸ“ (PBO å¼‚æ­¥ DMA + D3D11-GL äº’æ“ä½œ)
â”‚   â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒæ¶æ„ (æ¥å£å±‚/åŸºç¡€è®¾æ–½/å®ç°/æœåŠ¡)
â”‚   â”‚   â””â”€â”€ common/        # é…ç½®ä¸­å¿ƒã€æ— é”æ€§èƒ½ç›‘æ§ã€å›¾åƒè¯†åˆ«
â”‚   â””â”€â”€ env/               # é¢„ç¼–è¯‘ä¾èµ– (FFmpeg, ADB, OpenCV)
â”‚
â”œâ”€â”€ server/                 # æœåŠ¡ç«¯ (Android/Java)
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ control/       # FastTouch O(1) å¤šç‚¹è§¦æ§ã€v2 æç®€åè®®
â”‚       â”œâ”€â”€ video/         # ç¼–ç  (ABR è‡ªé€‚åº”ç ç‡)ã€OpenGL æ»¤é•œç®¡çº¿
â”‚       â”œâ”€â”€ kcp/           # KCP çº¯ Java å®ç°ã€è£¸ UDP å‘é€å™¨ã€FEC ç¼–ç å™¨
â”‚       â”œâ”€â”€ session/       # ä¼šè¯æ¶æ„ (TCP/KCP æ¨¡æ¿æ–¹æ³•æ¨¡å¼)
â”‚       â””â”€â”€ opengl/        # AffineOpenGLFilter GPU ä»¿å°„å˜æ¢
â”‚
â”œâ”€â”€ keymap/                 # é”®ä½é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ images/            # æ¨¡æ¿å›¾ç‰‡
â”‚   â”œâ”€â”€ scripts/           # è„šæœ¬æ¨¡å—
â”‚   â””â”€â”€ regions.json       # è‡ªå®šä¹‰é€‰åŒº
â””â”€â”€ config/                 # å…¨å±€é…ç½®
```

### æ ¸å¿ƒä¾èµ–

| ç»„ä»¶ | è¯´æ˜ |
|:-----|:-----|
| Qt 6.x (MSVC 2022) | GUI æ¡†æ¶ã€å¤šåª’ä½“ |
| FFmpeg 7.1 | è§†é¢‘è§£ç  |
| OpenCV 4.12 | å›¾åƒè¯†åˆ« (å¯é€‰) |
| KCP | ä½å»¶è¿Ÿ UDP ä¼ è¾“ |

---

## ğŸ”§ ä»æºç æ„å»º

è¯¦ç»†æ„å»ºæŒ‡å—è§ **[BUILD.md](docs/BUILD.md)**ã€‚

### ä¸€é”®è„šæœ¬ (æ¨è)

```powershell
cd ci\win
.\build_all.bat --qt "C:\Qt\6.5.0"
```

### Qt Creator

1. å®‰è£… Qt 6.5+ (MSVC 2022 64-bit)
2. ç”¨ Qt Creator æ‰“å¼€ `client/CMakeLists.txt`
3. é€‰æ‹© Release é…ç½®ï¼Œç‚¹å‡»æ„å»º

### æœåŠ¡ç«¯æ„å»º (å¯é€‰)

> å·²å†…ç½®é¢„ç¼–è¯‘æœåŠ¡ç«¯ï¼Œé€šå¸¸æ— éœ€è‡ªè¡Œæ„å»º

```powershell
cd server
..\gradlew.bat assembleRelease
```

---

## ğŸ“„ è®¸å¯è¯

[Apache License 2.0](LICENSE)

---

## ğŸ™ è‡´è°¢

- [scrcpy](https://github.com/Genymobile/scrcpy) â€” Android æŠ•å±å…ˆé©±
- [QtScrcpy](https://github.com/barry-ran/QtScrcpy) â€” é¡¹ç›®åŸºç¡€
- [opencv_matching](https://github.com/acai66/opencv_matching) â€” OpenCV å›¾åƒåŒ¹é…å°è£…
- [FFmpeg](https://ffmpeg.org/) / [Qt](https://www.qt.io/) / [OpenCV](https://opencv.org/) / [KCP](https://github.com/skywind3000/kcp)

---

<p align="center">
  å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸€ä¸ª â­ Starï¼
</p>
